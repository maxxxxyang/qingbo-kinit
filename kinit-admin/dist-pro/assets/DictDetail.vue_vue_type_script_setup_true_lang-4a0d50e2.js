import{a as e,b as a,d as l,c as t,p as i}from"./dict-b26f862b.js";import{u as s,_ as o}from"./Table.vue_vue_type_script_lang-5256bd69.js";import{e as u,W as d,G as n,M as r,x as p,a3 as c,N as v,r as _,w as m,o as f,j as g,m as y,k as b,ao as w,z as h}from"./index-9da7d198.js";import{E as k}from"./el-button-8f21380c.js";import{E as j}from"./el-switch-7720805d.js";import{a as z,E as D}from"./el-col-d9273186.js";import{_ as x}from"./Search.vue_vue_type_script_setup_true_lang-a57e37eb.js";import{_ as R}from"./ContentWrap.vue_vue_type_script_setup_true_lang-9c7e578a.js";import{_ as C}from"./Write.vue_vue_type_script_setup_true_lang-936b70dd.js";import{_ as I}from"./Dialog.vue_vue_type_style_index_0_lang-fcbfdb5d.js";const S=u({__name:"DictDetail",props:{dictTypeId:d.number.def(void 0)},setup(u){const d=u,{t:S}=n(),{tableRegister:T,tableState:U,tableMethods:L}=s({fetchDataApi:async()=>{const{pageSize:e,currentPage:l}=U,t=await a({page:b(l),limit:b(e),dict_type_id:d.dictTypeId,...b($)});return{list:t.data||[],total:t.count||0}},fetchDelApi:async e=>200===(await l(e)).code}),{dataList:P,loading:A,total:E,pageSize:V,currentPage:W}=U,{getList:M,delList:N}=L,G=r([{field:"id",label:"字典编号",show:!1,disabled:!1},{field:"label",label:"字典标签",show:!0,disabled:!0},{field:"value",label:"字典键值",show:!0},{field:"order",label:"字典排序",show:!0},{field:"disabled",label:"是否禁用",show:!0,slots:{default:e=>{const a=e.row;return p(c,null,[p(j,{value:!a.disabled,disabled:!0},null)])}}},{field:"remark",label:"备注",show:!1},{field:"create_datetime",label:"创建时间",show:!1},{field:"action",width:"120px",label:"操作",show:!0,slots:{default:e=>{const a=e.row;return p(c,null,[p(k,{type:"primary",link:!0,size:"small",onClick:()=>Z(a)},{default:()=>[v("编辑")]}),p(k,{type:"danger",loading:B.value,link:!0,size:"small",onClick:()=>F(a)},{default:()=>[v("删除")]})])}}}]),K=r([{field:"label",label:"字典标签",component:"Input",componentProps:{clearable:!1}}]),$=_({}),q=e=>{W.value=1,$.value=e,M()},B=_(!1),F=async e=>{B.value=!0,await N(!0,[e.id]).finally((()=>{B.value=!1}))},H=_(!1),J=_(""),O=_(),Q=_(""),X=_(),Y=_(!1),Z=async a=>{const l=await e(a.id);l&&(J.value="编辑字段元素",Q.value="edit",O.value=l.data,H.value=!0)},ee=()=>{J.value="新增字段元素",Q.value="add",O.value=void 0,H.value=!0},ae=async()=>{const e=b(X),a=await(null==e?void 0:e.submit());if(a){Y.value=!0;try{const e=_({});"add"===Q.value?(e.value=await t(a),e.value&&(H.value=!1,M())):"edit"===Q.value&&(e.value=await i(a),e.value&&(H.value=!1,M()))}finally{Y.value=!1}}};return m((()=>d.dictTypeId),(()=>{M()}),{deep:!0}),(e,a)=>(f(),g(c,null,[p(b(R),null,{default:y((()=>[p(b(x),{schema:K,onReset:q,onSearch:q},null,8,["schema"]),p(b(o),{"current-page":b(W),"onUpdate:currentPage":a[0]||(a[0]=e=>w(W)?W.value=e:null),"page-size":b(V),"onUpdate:pageSize":a[1]||(a[1]=e=>w(V)?V.value=e:null),showAction:"",activeUID:"detail",columns:G,"default-expand-all":"","node-key":"id",data:b(P),loading:b(A),pagination:{total:b(E)},onRegister:b(T),onRefresh:b(M)},{toolbar:y((()=>[p(b(z),{gutter:10},{default:y((()=>[p(b(D),{span:1.5},{default:y((()=>[p(b(k),{type:"primary",onClick:ee},{default:y((()=>[v("新增字典元素")])),_:1})])),_:1})])),_:1})])),_:1},8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])])),_:1}),p(b(I),{modelValue:H.value,"onUpdate:modelValue":a[3]||(a[3]=e=>H.value=e),title:J.value,height:650},{footer:y((()=>[p(b(k),{type:"primary",loading:Y.value,onClick:ae},{default:y((()=>[v(h(b(S)("exampleDemo.save")),1)])),_:1},8,["loading"]),p(b(k),{onClick:a[2]||(a[2]=e=>H.value=!1)},{default:y((()=>[v(h(b(S)("dialogDemo.close")),1)])),_:1})])),default:y((()=>[p(C,{ref_key:"writeRef",ref:X,"current-row":O.value,"dict-type-id":u.dictTypeId},null,8,["current-row","dict-type-id"])])),_:1},8,["modelValue","title"])],64))}});export{S as _};
