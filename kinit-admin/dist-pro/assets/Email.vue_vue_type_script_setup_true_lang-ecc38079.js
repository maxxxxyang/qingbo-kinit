import{u as a,F as e}from"./useForm-ecbcdb43.js";import{e as s,W as t,M as o,x as l,N as r,a3 as n,r as i,P as p,dF as m,o as c,l as u,k as d,ai as f}from"./index-9da7d198.js";import{E as w}from"./el-button-8f21380c.js";import{u as _}from"./useValidator-e352e7a8.js";const P=s({__name:"Email",props:{tabId:t.number},setup(s){const t=s,{required:P}=_(),b=o([{field:"email_access",label:"邮箱账号",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"email_password",label:"邮箱密码",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"email_server",label:"邮箱服务器",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"email_port",label:"服务器端口",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"active",label:"",colProps:{span:24},formItemProps:{slots:{default:()=>l(n,null,[l(w,{loading:E.value,type:"primary",onClick:k},{default:()=>[r("立即提交")]})])}}}]),v=o({email_access:[P()],email_password:[P()],email_port:[P()],email_server:[P()]}),{formRegister:y,formMethods:x}=a(),{setValues:h,getFormData:I,getElFormExpose:g}=x;let F=i({});const j=async()=>{const a=await f({tab_id:t.tabId});if(a){await h(a.data),F.value=a.data;const e=await g();null==e||e.clearValidate()}},E=i(!1),k=async()=>{const a=await g();if(await(null==a?void 0:a.validate())){const a=await I();if(E.value=!0,!a)return E.value=!1,p.error("未获取到数据");try{if(await m(a))return j(),p.success("更新成功")}finally{E.value=!1}}};return j(),(a,s)=>(c(),u(d(e),{rules:v,onRegister:d(y),schema:b},null,8,["rules","onRegister","schema"]))}});export{P as _};
