import{u as e,F as o}from"./useForm-ecbcdb43.js";import{u as s}from"./useValidator-e352e7a8.js";import{e as a,v as r,M as t,x as l,N as n,a3 as i,r as p,P as m,aj as d,o as c,l as u,k as f}from"./index-9da7d198.js";import{E as P}from"./el-button-8f21380c.js";const g=a({__name:"InfoWrite",setup(a){const{required:g,isTelephone:b}=s(),v=r(),h=t([{field:"name",label:"用户名称",component:"Input",colProps:{span:24},formItemProps:{rules:[g()]},componentProps:{style:{width:"50%"}}},{field:"nickname",label:"用户昵称",component:"Input",colProps:{span:24},componentProps:{style:{width:"50%"}}},{field:"telephone",label:"手机号",component:"Input",colProps:{span:24},formItemProps:{rules:[g(),{validator:b,trigger:"blur"}]},componentProps:{style:{width:"50%"},maxlength:11}},{field:"gender",label:"性别",colProps:{span:24},formItemProps:{rules:[g()]},component:"RadioGroup",componentProps:{options:[{label:"男",value:"0"},{label:"女",value:"1"}]}},{field:"save",colProps:{span:24},formItemProps:{slots:{default:()=>l(i,null,[l("div",{class:"w-[50%]"},[l(P,{loading:x.value,type:"primary",class:"w-[100%]",onClick:F},{default:()=>[n("保存")]})])])}}}]),{formRegister:w,formMethods:k}=e(),{setValues:y,getFormData:I,getElFormExpose:j}=k;y(v.getUser);const x=p(!1),F=async()=>{if(1===v.getUser.id)return m.warning("编辑账号为演示账号，无权限操作！");const e=await j();if(await(null==e?void 0:e.validate())){x.value=!0;const e=await I();try{const o=await d(e);o&&(v.updateUser(o.data),m.success("保存成功"))}finally{x.value=!1}}};return(e,s)=>(c(),u(f(o),{onRegister:f(w),schema:h,"hide-required-asterisk":"",class:"dark:border-1 dark:border-[var(--el-border-color)] dark:border-solid"},null,8,["onRegister","schema"]))}});export{g as _};
