import{Y as e,e as t,G as l,M as a,x as o,N as s,a3 as i,r,o as p,j as n,m,k as d,ao as u,z as c,l as _,O as h}from"./index-9da7d198.js";import{u as j,_ as f}from"./Table.vue_vue_type_script_lang-5256bd69.js";import{E as b}from"./el-button-8f21380c.js";import{_ as g}from"./Search.vue_vue_type_script_setup_true_lang-a57e37eb.js";import{_ as w}from"./ContentWrap.vue_vue_type_script_setup_true_lang-9c7e578a.js";import{_ as v}from"./Detail.vue_vue_type_script_setup_true_lang-f4d558dd.js";import{_ as x}from"./Dialog.vue_vue_type_style_index_0_lang-fcbfdb5d.js";import"./el-message-box-24354127.js";import"./el-input-26eda071.js";import"./event-5568c9d8.js";import"./use-form-item-8b7f5d34.js";import"./use-form-common-props-9d083c67.js";import"./index-cde97138.js";import"./isNil-1f22f7b0.js";import"./el-overlay-037540a2.js";import"./el-checkbox-group-b617b779.js";import"./vnode-ae242abb.js";import"./useForm-ecbcdb43.js";import"./el-col-d9273186.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-2fae9050.js";import"./el-tag-aef2ce12.js";import"./index-13d6a136.js";import"./el-date-picker-f32b0b71.js";import"./debounce-778af7ed.js";import"./el-switch-7720805d.js";import"./el-divider-fc00d058.js";import"./el-progress-69812d34.js";import"./style.css_vue_type_style_index_0_src_true_lang-0e7f3b44.js";import"./index-14d9f390.js";import"./strings-e2e316bd.js";import"./index-4dbb39b8.js";import"./el-table-column-102f47a6.js";import"./el-image-viewer-83790b35.js";import"./el-dropdown-item-c082162c.js";import"./refs-4f0941bf.js";/* empty css                   */import"./_Uint8Array-bbcc3a61.js";import"./useIcon-6417bbff.js";import"./el-card-5fa288fa.js";import"./Descriptions-fb3623c2.js";import"./el-descriptions-item-be87a779.js";const y=t({name:"SystemRecordOperation",__name:"Operation",setup(t){const{t:y}=l(),{tableRegister:k,tableState:R,tableMethods:S}=j({fetchDataApi:async()=>{const{pageSize:t,currentPage:l}=R,a=await(o={page:d(l),limit:d(t),...d(C)},e.get({url:"/vadmin/record/operations",params:o}));var o;return{list:a.data||[],total:a.count||0}}}),{dataList:z,loading:P,total:D,pageSize:U,currentPage:A}=R,{getList:I}=S,O=a([{field:"user_id",label:"操作人编号",show:!0,disabled:!0,width:"100px"},{field:"user_name",label:"操作人",show:!0,disabled:!0,width:"100px"},{field:"telephone",label:"手机号",show:!0,disabled:!0,width:"130px"},{field:"request_method",label:"请求方法",show:!0,disabled:!0,width:"100px"},{field:"client_ip",label:"客户端地址",width:"130px",show:!0,disabled:!0},{field:"tags",label:"标签",width:"130px",show:!0},{field:"summary",label:"操作内容",show:!0},{field:"description",label:"描述",show:!1},{field:"status_code",label:"操作状态",show:!0,width:"100px"},{field:"route_name",label:"接口函数",show:!1,width:"150px"},{field:"api_path",label:"接口地址",show:!1},{field:"params",label:"请求参数",show:!1},{field:"browser",label:"浏览器",show:!0,width:"150px"},{field:"system",label:"系统",show:!1,width:"150px"},{field:"process_time",label:"总耗时",show:!0},{field:"create_datetime",label:"操作时间",show:!0},{field:"action",width:"100px",show:!0,label:"操作",slots:{default:e=>{const t=e.row;return o(i,null,[o(b,{type:"primary",link:!0,onClick:()=>E(t,"detail")},{default:()=>[s("详情")]})])}}}]),q=a([{field:"telephone",label:"手机号",component:"Input",componentProps:{clearable:!1}},{field:"request_method",label:"请求方法",component:"Input",componentProps:{clearable:!1}},{field:"summary",label:"操作内容",component:"Input",componentProps:{clearable:!1}}]),C=r({}),L=e=>{A.value=1,C.value=e,I()},N=r(!1),V=r(""),M=r(),B=r(""),E=(e,t)=>{V.value=y("exampleDemo.detail"),B.value=t,M.value=e,N.value=!0};return(e,t)=>(p(),n(i,null,[o(d(w),null,{default:m((()=>[o(d(g),{schema:q,onReset:L,onSearch:L},null,8,["schema"]),o(d(f),{"current-page":d(A),"onUpdate:currentPage":t[0]||(t[0]=e=>u(A)?A.value=e:null),"page-size":d(U),"onUpdate:pageSize":t[1]||(t[1]=e=>u(U)?U.value=e:null),showAction:"",columns:O,"node-key":"id",data:d(z),loading:d(P),pagination:{total:d(D)},onRegister:d(k),onRefresh:d(I)},null,8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])])),_:1}),o(d(x),{modelValue:N.value,"onUpdate:modelValue":t[3]||(t[3]=e=>N.value=e),title:V.value,width:"800px"},{footer:m((()=>[o(d(b),{onClick:t[2]||(t[2]=e=>N.value=!1)},{default:m((()=>[s(c(d(y)("dialogDemo.close")),1)])),_:1})])),default:m((()=>["detail"===B.value?(p(),_(v,{key:0,"current-row":M.value},null,8,["current-row"])):h("",!0)])),_:1},8,["modelValue","title"])],64))}});export{y as default};
