import{e,r as a,o as s,j as t,y as r,x as l,m as i,N as n,k as d,l as o,O as p,P as u,az as f}from"./index-9da7d198.js";import{E as m}from"./el-button-8f21380c.js";import{E as c,a as _}from"./el-table-column-102f47a6.js";import"./el-tag-aef2ce12.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-2fae9050.js";import{E as y}from"./el-popconfirm-3191559c.js";/* empty css                   */import{E as w}from"./index-14d9f390.js";const g={class:"flex justify-between"},k=r("span",null,"已选用户列表",-1),v=e({__name:"PasswordSendEmail",props:{selections:{type:Object}},setup(e){const v=e,b=a(JSON.parse(JSON.stringify(v.selections))),h=a(!1),j=async()=>{h.value=!0;const e=b.value.filter((e=>!0!==e.reset_password_status)).map((e=>e.id));if(e.length<=0)return u.warning("已全部重置完成，无需重复操作");try{const a=await f(e);a&&(b.value=a.data,u.success("重置成功"))}finally{h.value=!1}};return(e,a)=>{var u;return s(),t("div",null,[r("div",g,[k,l(d(m),{type:"primary",disabled:0===(null==(u=b.value)?void 0:u.length),loading:h.value,onClick:j},{default:i((()=>[n("确认重置并发送邮件通知")])),_:1},8,["disabled","loading"])]),l(d(_),{data:b.value,stripe:!0,border:!0,style:{width:"100%"},class:"mt-10px","max-height":"500px"},{default:i((()=>[l(d(c),{prop:"id",label:"用户编号",width:"100",align:"center"}),l(d(c),{prop:"name",label:"姓名",width:"120",align:"center"}),l(d(c),{prop:"email",label:"邮箱",width:"200",align:"center"}),l(d(c),{prop:"reset_password_status",label:"重置状态",width:"100",align:"center"},{default:i((e=>[!0===e.row.reset_password_status?(s(),o(d(w),{key:0,type:"success",effect:"dark"},{default:i((()=>[n(" 重置成功 ")])),_:1})):!1===e.row.reset_password_status?(s(),o(d(w),{key:1,type:"danger",effect:"dark"},{default:i((()=>[n(" 重置失败 ")])),_:1})):(s(),o(d(w),{key:2,type:"warning",effect:"dark"},{default:i((()=>[n(" 待重置 ")])),_:1}))])),_:1}),l(d(c),{prop:"send_sms_status",label:"发送状态",width:"100",align:"center"},{default:i((e=>[!0===e.row.send_sms_status?(s(),o(d(w),{key:0,type:"success",effect:"dark"},{default:i((()=>[n(" 发送成功 ")])),_:1})):!1===e.row.send_sms_status?(s(),o(d(w),{key:1,type:"danger",effect:"dark"},{default:i((()=>[n(" 发送失败 ")])),_:1})):(s(),o(d(w),{key:2,type:"warning",effect:"dark"},{default:i((()=>[n(" 待发送 ")])),_:1}))])),_:1}),l(d(c),{prop:"send_sms_msg",label:"描述",align:"center"}),l(d(c),{fixed:"right",label:"操作",width:"100",align:"center"},{default:i((e=>[l(d(y),{title:"确认移除吗?",onConfirm:a=>{return s=e.$index,void b.value.splice(s,1);var s}},{reference:i((()=>[!0!==e.row.send_sms_status?(s(),o(d(m),{key:0,link:"",type:"primary",size:"small"},{default:i((()=>[n("移除")])),_:1})):p("",!0)])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])])}}});export{v as _};
