import{u as e,F as o}from"./useForm-ecbcdb43.js";import{u as l}from"./useValidator-e352e7a8.js";import{e as t,W as a,M as n,x as p,N as s,a3 as i,w as r,o as u,l as d,k as m}from"./index-9da7d198.js";import{b as c}from"./menu-519ca870.js";import{E as f}from"./el-button-8f21380c.js";import{b}from"./el-input-26eda071.js";const y=t({__name:"Write",props:{currentRow:{type:Object,default:()=>null},parentId:a.number.def(void 0)},setup(t,{expose:a}){const y=t,{required:h}=l(),w=()=>{window.open("https://iconify.design/")},v=n([{field:"parent_id",label:"上级菜单",colProps:{span:24},component:"TreeSelect",componentProps:{style:{width:"100%"},checkStrictly:!0,placeholder:"请选择上级菜单",nodeKey:"value",defaultExpandAll:!0},optionApi:async()=>(await c()).data,value:y.parentId},{field:"menu_type",label:"菜单类型",colProps:{span:24},component:"RadioGroup",componentProps:{style:{width:"100%"},options:[{label:"目录",value:"0"},{label:"菜单",value:"1"},{label:"按钮",value:"2"}]},value:"0"},{field:"icon",label:"菜单图标",colProps:{span:24},component:"Input",formItemProps:{slots:{default:e=>p(i,null,[p("div",{style:"display: flex; justify-content: space-between"},[p(b,{modelValue:e.icon,"onUpdate:modelValue":o=>e.icon=o,placeholder:"支持 Iconify 中的所有图标，请登录网站自行搜索：https://iconify.design/",style:"width: 490px"},null),p("div",{style:"margin-left: 10px"},[p(f,{type:"primary",onClick:w},{default:()=>[s("跳转")]})])])])}},ifshow:e=>"2"!==e.menu_type},{field:"title",label:"菜单名称",component:"Input",colProps:{span:12}},{field:"order",label:"显示排序",component:"InputNumber",colProps:{span:12},componentProps:{style:{width:"100%"}}},{field:"path",label:"路由地址",component:"Input",colProps:{span:12},ifshow:e=>"2"!==e.menu_type},{field:"component",label:"组件路径",component:"Input",colProps:{span:12},ifshow:e=>"2"!==e.menu_type},{field:"redirect",label:"重定向",component:"Input",colProps:{span:12},ifshow:e=>"2"!==e.menu_type},{field:"hidden",label:"显示状态",colProps:{span:12},component:"RadioGroup",componentProps:{style:{width:"100%"},options:[{label:"显示",value:!1},{label:"隐藏",value:!0}]},value:!1,ifshow:e=>"2"!==e.menu_type},{field:"disabled",label:"菜单状态",colProps:{span:12},component:"RadioGroup",componentProps:{style:{width:"100%"},options:[{label:"正常",value:!1},{label:"停用",value:!0}]},value:!1,ifshow:e=>"2"!==e.menu_type},{field:"perms",label:"权限标识",component:"Input",colProps:{span:12},ifshow:e=>"2"===e.menu_type},{field:"noCache",label:"页面缓存",colProps:{span:12},component:"RadioGroup",componentProps:{style:{width:"100%"},options:[{label:"缓存",value:!1},{label:"不缓存",value:!0}]},value:!1,ifshow:e=>"1"===e.menu_type,labelMessage:"开启页面缓存,需要组件名称必须与xx.vue页面的name一致"}]),P=n({title:[h()],menu_type:[h()],disabled:[h()],hidden:[h()],path:[h()],noCache:[h()],order:[h()]}),{formRegister:_,formMethods:x}=e(),{setValues:I,getFormData:g,getElFormExpose:R}=x;return r((()=>y.currentRow),(e=>{e&&I(e)}),{deep:!0,immediate:!0}),a({submit:async()=>{const e=await R();if(await(null==e?void 0:e.validate())){return await g()}}}),(e,l)=>(u(),d(m(o),{rules:P,onRegister:m(_),schema:v,labelWidth:100},null,8,["rules","onRegister","schema"]))}});export{y as _};
