import{u as e,F as o}from"./useForm-ecbcdb43.js";import{u as l}from"./useValidator-e352e7a8.js";import{c as t}from"./role-6b68436c.js";import{e as s,M as a,w as n,o as p,l as i,k as r}from"./index-9da7d198.js";const m=s({__name:"Write",props:{currentRow:{type:Object,default:()=>null}},setup(s,{expose:m}){const c=s,{required:u,isTelephone:d,isEmail:f}=l(),b=a([{field:"name",label:"用户名称",colProps:{span:12},component:"Input",componentProps:{style:{width:"100%"}}},{field:"nickname",label:"用户昵称",colProps:{span:12},component:"Input",componentProps:{style:{width:"100%"}}},{field:"telephone",label:"手机号码",colProps:{span:12},component:"Input",componentProps:{style:{width:"100%"}}},{field:"email",label:"邮箱",colProps:{span:12},component:"Input",componentProps:{style:{width:"100%"}}},{field:"gender",label:"性别",colProps:{span:12},component:"RadioGroup",componentProps:{style:{width:"100%"},options:[{label:"男",value:"0"},{label:"女",value:"1"}]},value:"0"},{field:"",label:"默认密码",colProps:{span:12},component:"Text",componentProps:{style:{width:"100%"}},value:"手机号后六位",ifshow:e=>void 0===e.id},{field:"is_staff",label:"工作人员",colProps:{span:24},component:"RadioGroup",componentProps:{style:{width:"100%"},options:[{label:"是",value:!0},{label:"否",value:!1}]},value:!0},{field:"is_active",label:"状态",colProps:{span:24},component:"RadioGroup",componentProps:{style:{width:"100%"},options:[{label:"正常",value:!0},{label:"停用",value:!1}]},value:!0},{field:"role_ids",label:"角色",colProps:{span:24},component:"Select",componentProps:{style:{width:"100%"},multiple:!0},optionApi:async()=>(await t()).data,value:[],ifshow:e=>e.is_staff}]),v=a({name:[u()],is_active:[u()],is_staff:[u()],role_ids:[u()],telephone:[u(),{validator:d,trigger:"blur"}],email:[{validator:f,trigger:"blur"}]}),{formRegister:w,formMethods:P}=e(),{setValues:h,getFormData:y,getElFormExpose:g}=P;return n((()=>c.currentRow),(e=>{e&&h(e)}),{deep:!0,immediate:!0}),m({submit:async()=>{const e=await g();if(await(null==e?void 0:e.validate())){return await y()}}}),(e,l)=>(p(),i(r(o),{rules:v,onRegister:r(w),schema:b},null,8,["rules","onRegister","schema"]))}});export{m as _};
